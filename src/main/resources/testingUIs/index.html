<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FindBridge - Reuniting Lost Items with Their Owners</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
    }

    :root {
      --primary: #535c68;
      --primary-dark: #95afc0;
      --primary-light: #93c5fd;
      --secondary: #64748b;
      --accent: #079992;
      --accent-dark: #059669;
      --light-bg: #f8fafc;
      --card-bg: #ffffff;
      --text-dark: #1e293b;
      --text-light: #64748b;
      --border: #e2e8f0;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --radius: 8px;
      --radius-lg: 12px;
      --transition: all 0.3s ease;
    }

    body {
      background-color: var(--light-bg);
      color: var(--text-dark);
      line-height: 1.6;
      font-weight: 400;
    }

    header {
      background: var(--card-bg);
      color: var(--text-dark);
      padding: 1rem 2rem;
      box-shadow: var(--shadow-sm);
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 1px solid var(--border);
    }

    .header-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
    }

    .logo i {
      margin-right: 10px;
      color: var(--accent);
    }

    .nav-buttons {
      display: flex;
      gap: 12px;
    }

    .nav-btn {
      padding: 8px 20px;
      border: none;
      border-radius: var(--radius);
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      font-size: 0.9rem;
    }

    /* Updated header button styles */
    .login-btn {
      background: transparent;
      color: #4b6584;
      border: 1px solid #4b6584;
    }

    .login-btn:hover {
      background: rgba(75, 101, 132, 0.1);
    }

    .signup-btn {
      background: #4b6584;
      color: white;
      border: 1px solid #4b6584;
    }

    .signup-btn:hover {
      background: #3a5069;
      border-color: #3a5069;
    }

    .hero {
      background: linear-gradient(rgba(103, 126, 175, 0.85), rgba(46, 66, 119, 0.85)), url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-1.2.1&auto=format&fit=crop&w=2000&q=80');
      background-size: cover;
      background-position: center;
      color: white;
      padding: 6rem 2rem;
      text-align: center;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 80vh;
    }

    .hero-content {
      max-width: 800px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .hero h1 {
      font-size: 2.8rem;
      margin-bottom: 1.5rem;
      font-weight: 700;
      line-height: 1.2;
    }

    .hero p {
      font-size: 1.2rem;
      margin-bottom: 2.5rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      font-weight: 300;
      opacity: 0.95;
    }

    .hero-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-top: 1rem;
    }

    /* Updated hero button styles */
    .hero .login-btn {
      background: transparent;
      color: white;
      border: 1px solid #95afc0;
    }

    .hero .login-btn:hover {
      background: rgba(149, 175, 192, 0.2);
    }

    .hero .signup-btn {
      background: #95afc0;
      color: white;
      border: 1px solid #95afc0;
    }

    .hero .signup-btn:hover {
      background: #7e9aac;
      border-color: #7e9aac;
    }

    .features-section {
      padding: 5rem 2rem;
      background-color: var(--light-bg);
    }

    .section-title {
      text-align: center;
      margin-bottom: 3rem;
      color: var(--text-dark);
      font-size: 2.2rem;
      font-weight: 700;
    }

    .section-subtitle {
      text-align: center;
      margin-bottom: 4rem;
      color: var(--text-light);
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      font-size: 1.1rem;
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .feature-card {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      padding: 2.5rem 2rem;
      text-align: center;
      transition: var(--transition);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
    }

    .feature-icon {
      width: 70px;
      height: 70px;
      background: var(--primary);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
      font-size: 1.8rem;
    }

    .feature-card h3 {
      color: var(--text-dark);
      margin-bottom: 1rem;
      font-size: 1.3rem;
      font-weight: 600;
    }

    .feature-card p {
      color: var(--text-light);
      line-height: 1.7;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(4px);
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s ease;
      overflow-y: auto;
      padding: 20px;
    }

    .modal.active {
      opacity: 1;
    }

    .modal-content {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 500px;
      padding: 2.5rem;
      box-shadow: var(--shadow-lg);
      position: relative;
      color: var(--text-dark);
      margin: 0 auto;
      position: relative;
      top: 50%;
      transform: translateY(-50%) scale(0.95);
      transition: transform 0.4s ease;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal.active .modal-content {
      transform: translateY(-50%) scale(1);
    }

    .close {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-light);
      transition: var(--transition);
      z-index: 10;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .close:hover {
      color: var(--text-dark);
      background: var(--light-bg);
    }

    h2 {
      color: var(--text-dark);
      margin-bottom: 1.5rem;
      text-align: center;
      font-size: 1.8rem;
      font-weight: 600;
    }

    .form-group {
      margin-bottom: 1.5rem;
      text-align: left;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--text-dark);
      font-size: 0.9rem;
    }

    input, select {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-size: 1rem;
      transition: var(--transition);
      background: var(--light-bg);
    }

    input:focus, select:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .submit-btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 14px;
      border-radius: var(--radius);
      width: 100%;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      margin-top: 0.5rem;
    }

    .submit-btn:hover {
      background: var(--primary-dark);
    }

    .file-upload {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .file-upload-btn {
      background: var(--light-bg);
      padding: 10px 16px;
      border-radius: var(--radius);
      cursor: pointer;
      font-size: 0.9rem;
      color: var(--text-dark);
      border: 1px dashed var(--border);
      transition: var(--transition);
    }

    .file-upload-btn:hover {
      background: var(--border);
    }

    footer {
      background: var(--text-dark);
      color: white;
      text-align: center;
      padding: 3rem 2rem;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
    }

    .copyright {
      margin-top: 2rem;
      color: var(--text-light);
      font-size: 0.9rem;
    }

    @media (max-width: 768px) {
      .header-container {
        flex-direction: column;
        gap: 15px;
      }

      .hero {
        padding: 4rem 1.5rem;
        min-height: 70vh;
      }

      .hero h1 {
        font-size: 2.2rem;
      }

      .hero p {
        font-size: 1rem;
      }

      .hero-buttons {
        flex-direction: column;
        width: 100%;
        max-width: 300px;
      }

      .nav-buttons {
        width: 100%;
        justify-content: center;
      }

      .feature-grid {
        grid-template-columns: 1fr;
      }

      .modal-content {
        width: 95%;
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body>
<header>
  <div class="header-container">
    <div class="logo">
      <i class="fas fa-bridge"></i>
      <span>FindBridge</span>
    </div>
    <div class="nav-buttons">
      <button id="loginBtn" class="nav-btn login-btn">Log In</button>
      <button id="signupBtn" class="nav-btn signup-btn">Sign Up</button>
    </div>
  </div>
</header>

<section class="hero">
  <div class="hero-content">
    <h1>Reconnecting People with Their Lost Items</h1>
    <p>FindBridge is the trusted platform that safely reunites lost belongings with their owners through community collaboration and smart technology.</p>
    <div class="hero-buttons">
      <button id="heroLoginBtn" class="nav-btn login-btn">Log In</button>
      <button id="heroSignupBtn" class="nav-btn signup-btn">Get Started</button>
    </div>
  </div>
</section>

<section class="features-section">
  <h2 class="section-title">How FindBridge Works</h2>
  <p class="section-subtitle">Our platform combines innovative technology with community spirit to create the most effective lost-and-found solution available.</p>

  <div class="feature-grid">
    <div class="feature-card">
      <div class="feature-icon">
        <i class="fas fa-shield-alt"></i>
      </div>
      <h3>Secure Verification</h3>
      <p>Advanced security protocols protect your privacy and ensure safe, verified exchanges between users.</p>
    </div>
    <div class="feature-card">
      <div class="feature-icon">
        <i class="fas fa-comments"></i>
      </div>
      <h3>Direct Messaging</h3>
      <p>Our encrypted chat system enables secure communication between item owners and finders without sharing personal contact information.</p>
    </div>
    <div class="feature-card">
      <div class="feature-icon">
        <i class="fas fa-search"></i>
      </div>
      <h3>Advanced Search</h3>
      <p>Filter by category, location, date, and keywords to quickly locate relevant listings.</p>
    </div>
    <div class="feature-card">
      <div class="feature-icon">
        <i class="fas fa-bell"></i>
      </div>
      <h3>Smart Notifications</h3>
      <p>Receive instant alerts when new items matching your description are reported found in your area.</p>
    </div>
    <div class="feature-card">
      <div class="feature-icon">
        <i class="fas fa-map-marker-alt"></i>
      </div>
      <h3>Location Tracking</h3>
      <p>Pinpoint exact locations where items were lost or found with our privacy-focused mapping system.</p>
    </div>
    <div class="feature-card">
      <div class="feature-icon">
        <i class="fas fa-users"></i>
      </div>
      <h3>Community Network</h3>
      <p>Join a growing network of trustworthy individuals committed to helping others recover their belongings.</p>
    </div>
  </div>
</section>

<!-- Login Modal -->
<div id="loginModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>Login to Your Account</h2>
    <form id="loginForm">
      <div class="form-group">
        <label for="username">Username or Email</label>
        <input type="text" id="username" placeholder="Enter your username or email" required>
      </div>
      <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" placeholder="Enter your password" required>
      </div>
      <div class="form-group" style="text-align: right; margin-bottom: 0;">
        <a href="#" style="color: var(--primary); text-decoration: none; font-size: 0.9rem;">Forgot password?</a>
      </div>
      <button type="submit" class="submit-btn">Login</button>
      <p style="text-align: center; margin-top: 1.5rem; color: var(--text-light);">
        Don't have an account? <a href="#" id="switchToSignup" style="color: var(--primary); text-decoration: none; font-weight: 500;">Sign up</a>
      </p>
    </form>
  </div>
</div>

<!-- Signup Modal -->
<div id="signupModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>Create Your Account</h2>
    <form id="signupForm">
      <div class="form-group">
        <label for="firstname">First Name</label>
        <input type="text" id="firstname" placeholder="Enter your first name" required>
      </div>
      <div class="form-group">
        <label for="lastname">Last Name</label>
        <input type="text" id="lastname" placeholder="Enter your last name" required>
      </div>
      <div class="form-group">
        <label for="email">Email Address</label>
        <input type="email" id="email" placeholder="Enter your email" required>
      </div>
      <div class="form-group">
        <label for="newUsername">Username</label>
        <input type="text" id="newUsername" placeholder="Choose a username" required>
      </div>
      <div class="form-group">
        <label for="newPassword">Password</label>
        <input type="password" id="newPassword" placeholder="Create a strong password" required>
      </div>
      <div class="form-group">
        <label for="role">I want to join as an </label>
        <select id="role" required>
          <option value="">Admin</option>
          <option value="user">User</option>
          <option value="finder">Sponsor</option>
        </select>
      </div>
      <div class="form-group">
        <label for="profilePhoto">Profile Photo (Optional)</label>
        <div class="file-upload">
          <input type="file" id="profilePhoto" accept="image/*" style="display: none;">
          <div class="file-upload-btn" id="fileUploadLabel">Choose file</div>
          <span id="fileName">No file chosen</span>
        </div>
      </div>
      <button type="submit" class="submit-btn">Create Account</button>
      <p style="text-align: center; margin-top: 1.5rem; color: var(--text-light);">
        Already have an account? <a href="#" id="switchToLogin" style="color: var(--primary); text-decoration: none; font-weight: 500;">Log in</a>
      </p>
    </form>
  </div>
</div>

<footer>
  <div class="footer-content">
    <div class="logo" style="justify-content: center; color: white;">
      <i class="fas fa-bridge"></i>
      <span>FindBridge</span>
    </div>
    <p class="copyright">&copy; 2025 FindBridge. All rights reserved.</p>
  </div>
</footer>

<script>
  $(document).ready(function() {
    // Function to center modal
    function centerModal() {
      $('.modal').each(function() {
        var modal = $(this);
        var modalContent = modal.find('.modal-content');

        // Reset any previous positioning
        modalContent.css({
          'margin-top': '',
          'top': '50%',
          'transform': 'translateY(-50%) scale(0.95)'
        });

        // If content is taller than viewport, position at top with margin
        if (modalContent.outerHeight() > $(window).height() - 40) {
          modalContent.css({
            'top': '20px',
            'transform': 'none',
            'margin-top': '0',
            'margin-bottom': '20px'
          });
        }
      });
    }

    // Center modals on load and resize
    $(window).on('resize', centerModal);

    // Switch between login and signup modals
    $("#switchToSignup").click(function(e) {
      e.preventDefault();
      $("#loginModal").removeClass("active").fadeOut();
      $("#signupModal").addClass("active").fadeIn();
      centerModal();
    });

    $("#switchToLogin").click(function(e) {
      e.preventDefault();
      $("#signupModal").removeClass("active").fadeOut();
      $("#loginModal").addClass("active").fadeIn();
      centerModal();
    });

    // Open Login Modal
    $("#loginBtn, #heroLoginBtn").click(function() {
      $("#loginModal").addClass("active").fadeIn();
      $("body").css("overflow", "hidden");
      centerModal();
    });

    // Open Signup Modal
    $("#signupBtn, #heroSignupBtn").click(function() {
      $("#signupModal").addClass("active").fadeIn();
      $("body").css("overflow", "hidden");
      centerModal();
    });

    // Close Modals
    $(".close").click(function() {
      $(".modal").removeClass("active").fadeOut();
      $("body").css("overflow", "auto");
    });

    // Close modal when clicking outside
    $(window).click(function(event) {
      if ($(event.target).hasClass("modal")) {
        $(".modal").removeClass("active").fadeOut();
        $("body").css("overflow", "auto");
      }
    });

    // File upload label
    $("#fileUploadLabel").click(function() {
      $("#profilePhoto").click();
    });

    $("#profilePhoto").change(function() {
      const fileName = $(this).val().split("\\").pop();
      $("#fileName").text(fileName || "No file chosen");
    });

    // Form submissions
    // $("#loginForm").submit(function(e) {
    //   e.preventDefault();
    //   // Simulate loading
    //   const submitBtn = $(this).find('.submit-btn');
    //   submitBtn.html('<i class="fas fa-spinner fa-spin"></i> Logging in...');
    //   submitBtn.prop('disabled', true);
    //
    //   setTimeout(function() {
    //     alert("Login functionality would be implemented here!");
    //     $("#loginModal").removeClass("active").fadeOut();
    //     $("body").css("overflow", "auto");
    //     submitBtn.html('Login');
    //     submitBtn.prop('disabled', false);
    //   }, 1500);
    // });

    // $("#signupForm").submit(function(e) {
    //   e.preventDefault();
    //   // Simulate loading
    //   const submitBtn = $(this).find('.submit-btn');
    //   submitBtn.html('<i class="fas fa-spinner fa-spin"></i> Creating Account...');
    //   submitBtn.prop('disabled', true);
    //
    //   setTimeout(function() {
    //     alert("Account creation functionality would be implemented here!");
    //     $("#signupModal").removeClass("active").fadeOut();
    //     $("body").css("overflow", "auto");
    //     submitBtn.html('Create Account');
    //     submitBtn.prop('disabled', false);
    //   }, 1500);
    // });

    // ===========================================================================================================




// Login function using Fetch
    async function loginUser(authData) {
      try {
        const response = await fetch('http://localhost:8080/auth/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(authData)
        });

        const result = await response.json();

        if (response.ok) {
          // Store the token
          localStorage.setItem('token', result.data.token);
          localStorage.setItem('user', JSON.stringify(result.data.user));
          return result;
        } else {
          throw new Error(result.message || 'Login failed');
        }
      } catch (error) {
        console.error('Login error:', error);
        throw error;
      }
    }

// Logout function using Fetch
    async function logoutUser() {
      try {
        const token = localStorage.getItem('token');

        const response = await fetch('http://localhost:8080/auth/logout', {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json',
          }
        });

        const result = await response.json();

        if (response.ok) {
          // Clear stored data
          localStorage.removeItem('token');
          localStorage.removeItem('user');
          return result;
        } else {
          throw new Error(result.message || 'Logout failed');
        }
      } catch (error) {
        console.error('Logout error:', error);
        throw error;
      }
    }

    // Update the signup form submission
    $("#signupForm").submit(async function(e) {
      e.preventDefault();

      const submitBtn = $(this).find('.submit-btn');
      submitBtn.html('<i class="fas fa-spinner fa-spin"></i> Creating Account...');
      submitBtn.prop('disabled', true);

      try {
        const registerData = {
          firstname: $("#firstname").val(),
          lastname: $("#lastname").val(),
          email: $("#email").val(),
          username: $("#newUsername").val(),
          password: $("#newPassword").val(),
          role: $("#role").val()
        };

        const result = await registerUser(registerData);

        alert("Account created successfully!");
        $("#signupModal").removeClass("active").fadeOut();
        $("body").css("overflow", "auto");

      } catch (error) {
        alert("Error: " + error.message);
      } finally {
        submitBtn.html('Create Account');
        submitBtn.prop('disabled', false);
      }
    });

// Update the login form submission
    $("#loginForm").submit(async function(e) {
      e.preventDefault();

      const submitBtn = $(this).find('.submit-btn');
      submitBtn.html('<i class="fas fa-spinner fa-spin"></i> Logging in...');
      submitBtn.prop('disabled', true);

      try {
        const authData = {
          username: $("#username").val(),
          password: $("#password").val()
        };

        const result = await loginUser(authData);

        alert("Login successful!");
        $("#loginModal").removeClass("active").fadeOut();
        $("body").css("overflow", "auto");

        // Redirect to dashboard or update UI
        window.location.href = "dashboard.html";

      } catch (error) {
        alert("Error: " + error.message);
      } finally {
        submitBtn.html('Login');
        submitBtn.prop('disabled', false);
      }

      // Function to get stored token
      function getToken() {
        return localStorage.getItem('token');
      }

// Function to check if user is logged in
      function isLoggedIn() {
        return !!localStorage.getItem('token');
      }

// Function to get user data
      function getUser() {
        const userStr = localStorage.getItem('user');
        return userStr ? JSON.parse(userStr) : null;
      }

// Function to add authorization header to requests
      function getAuthHeaders() {
        const token = getToken();
        return {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json'
        };
      }

    });
  });
</script>
</body>
</html>